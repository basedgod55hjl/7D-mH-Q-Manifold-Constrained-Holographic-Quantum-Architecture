// 7D Translated Source
// Generated by 7D Rewrite Engine v1.0
// Sovereignty: ENABLED

cmake_minimum_required(VERSION 3.25)

project(CRYSTAL_KERNELS_HIP LANGUAGES HIP)

# HIP Kernel source
set(HIP_SOURCES
    kernels/mhq7d_rocm.hip
)

# Build shared library
add_library(crystal_kernels_rocm SHARED ${HIP_SOURCES})

target_include_directories(crystal_kernels_rocm PUBLIC
    ${CMAKE_CURRENT_SOURCE_DIR}/kernels
)

# Standard HIP libraries are automatically linked by enable_language(HIP)
# but we can specify additional ones if needed.

set_target_properties(crystal_kernels_rocm PROPERTIES
    POSITION_INDEPENDENT_CODE ON
)

# Install
install(TARGETS crystal_kernels_rocm
    LIBRARY DESTINATION ${CMAKE_SOURCE_DIR}/lib
    RUNTIME DESTINATION ${CMAKE_SOURCE_DIR}/lib
    ARCHIVE DESTINATION ${CMAKE_SOURCE_DIR}/lib
)
